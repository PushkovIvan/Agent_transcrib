# Audio Recorder with Transcription

Приложение для записи аудио с автоматической транскрибацией и анализом с помощью GigaChat.

## Возможности

- Запись аудио через браузер
- Автоматическая конвертация в MP3
- Транскрибация с определением спикеров
- Анализ содержания с помощью GigaChat
- Экспорт результатов в формате Word (.docx)
- Скачивание текстовой версии

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что у вас установлен ffmpeg:
```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt update
sudo apt install ffmpeg

# Windows
# Скачайте с https://ffmpeg.org/download.html
```

3. Настройте конфигурацию:
   - Убедитесь, что файл `config.yaml` содержит правильный токен GigaChat
   - При необходимости измените путь к ffmpeg в `app/app.py`

## Запуск

### Способ 1: Автоматический запуск с проверками
```bash
python start.py
```

### Способ 2: Прямой запуск Flask приложения
```bash
cd app
python app.py
```

Приложение будет доступно по адресу: http://127.0.0.1:5000

## Использование

1. Откройте браузер и перейдите на http://127.0.0.1:5000
2. Нажмите "Start Recording" для начала записи
3. Говорите в микрофон
4. Нажмите "Stop Recording" для завершения записи
5. Дождитесь автоматической обработки:
   - Конвертация в MP3
   - Транскрибация с определением спикеров
   - Анализ содержания
6. Скачайте результаты:
   - Документ Word с транскрипцией и анализом
   - Текстовый файл с транскрипцией

## Структура проекта

```
agent_transcrib/
├── start.py              # Скрипт запуска с проверками
├── config.py             # Загрузка конфигурации
├── config.yaml           # Конфигурационный файл
├── prompt.txt            # Промпт для анализа транскрипции
├── requirements.txt      # Зависимости Python
├── README.md            # Документация
├── recordings/          # Папка для сохранения записей
└── app/                 # Основное приложение
    ├── app.py           # Flask приложение
    ├── utils.py         # Вспомогательные функции
    ├── templates/       # HTML шаблоны
    │   └── index.html
    ├── static/          # Статические файлы
    │   ├── css/
    │   │   └── style.css
    │   └── js/
    │       └── script.js
    └── temp/            # Временные файлы
```

## Технологии

- **Backend**: Flask
- **Аудио**: MediaRecorder API, ffmpeg
- **Транскрибация**: OpenAI Whisper
- **Определение спикеров**: UniSpeechSat + кластеризация
- **Анализ**: GigaChat API
- **Документы**: python-docx

## Требования

- Python 3.8+
- Современный браузер с поддержкой MediaRecorder API
- Микрофон
- Достаточно места на диске для моделей и записей

## Примечания

- Первый запуск может занять время для загрузки моделей Whisper и UniSpeechSat
- Качество транскрибации зависит от качества записи
- Определение спикеров работает лучше с четко различимыми голосами
- Анализ GigaChat требует стабильного интернет-соединения

## Настройка

### Конфигурация
- `config.yaml` - настройки GigaChat API
- `prompt.txt` - промпт для анализа транскрипции (можно редактировать)

### Промпт для анализа
Файл `prompt.txt` содержит инструкции для GigaChat по анализу транскрипции. Вы можете изменить этот файл для настройки:
- Формата вывода анализа
- Критериев выделения информации
- Структуры отчета